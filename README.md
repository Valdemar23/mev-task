# mev-task
Application deployed on AWS EC2 using Ansible-playbooks, application existed in Docker-containers 
*Задание*

Docker:
    - Dockerfile для SPA
    - Dockerfile для API

Ansible:
      - Плейбук для настройки сервера
        * Установка ПО: Docker CE, Docker-compose, Nginx
        * Создание пользователя: operator (будет использоваться для развертывания приложения)
        * Настройка nginx:
            + Слушает на порту 80/TCP
            + Все запросы, кроме эндпоинта /api, проксируються в контейнер с SPA (80/TCP)
            + Эндпоинта /api проксируется в контейнер API (4000/TCP)
    - Плейбук для деплоя приложения
        - Может развертывать как API так и SPA
        - Принимает аргументы:
            * Имя компонента (SPA или API)
            * Тег докер образа
        - На целевом сервере в домашней директории пользователя operator создает:
            * Директорию с именем компонента
            * В директории компонента генерирует docker-compose.yml, который описывает конфигурацию контейнера компонента
            * Выполняет авторизацию в Docker Hub
            * Выполняет пулл целевого докер образа
            * Используя docker-compose запускает контейнер с приложением

Jenkins (пайплайны в декларативном стиле):
    - Джоб для создания инфраструктуры
    - Джоб для настройки сервера
    - Джоб для сборки и деплоя SPA
    - Джоб для сборки и деплоя API

*Ресурсы*

Приложения:
API: https://github.com/kompaniets-viacheslav/mev-api
SPA: https://github.com/kompaniets-viacheslav/mev-spa
Эти 2 репозитория необходимо будет форкнуть к себе в аккаунт на GitHub и далее работать с ними в своём аккаунте.

Адрес Jenkins сервера: http://jenkins-intern.mev.cloud
Для выполнения работ используйте инстанс типа t2.micro с операционной системой Ubuntu 18.04.

*Результат*

Как результат выполнения работы, принимается:
Репозитории с плейбуками для ansible и пайплайнами для Jenkins
Созданные вами Jobs на Jenkins
Адрес сервера, где можно проверить работоспособность приложения

*Дополнительное задание*

Это задание опционально, его можно пропустить, но его выполнение будет большим плюсом.

Ansible:
  - Плейбук для создания инфраструктуры в AWS
        Создаются ресурсы:
            * VPC
            * Subnet
            * Internet gateway
            * Security group (разрешаются входящие соединения с любого IP адреса но только по портам 22/TCP, 80/TCP)
            * EC2 Instance (t2.micro / OS: Ubuntu 18.04)
